<!DOCTYPE html>  <html> <head>   <title>lowpro.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="abapp.html">                 abapp.js               </a>                                           <a class="source" href="abmessage.html">                 abmessage.js               </a>                                           <a class="source" href="app.html">                 app.js               </a>                                           <a class="source" href="compiler.html">                 compiler.js               </a>                                           <a class="source" href="def.html">                 def.js               </a>                                           <a class="source" href="euwindow.html">                 euwindow.js               </a>                                           <a class="source" href="faye_ext.html">                 faye_ext.js               </a>                                           <a class="source" href="handlebars.html">                 handlebars.js               </a>                                           <a class="source" href="lowpro.html">                 lowpro.js               </a>                                           <a class="source" href="managers.html">                 managers.js               </a>                                           <a class="source" href="mustache.html">                 mustache.js               </a>                                           <a class="source" href="protoaculous.min.html">                 protoaculous.min.js               </a>                                           <a class="source" href="prototype.html">                 prototype.js               </a>                                           <a class="source" href="prototype.s2.min.html">                 prototype.s2.min.js               </a>                                           <a class="source" href="sha1.html">                 sha1.js               </a>                                           <a class="source" href="templates.html">                 templates.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               lowpro.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nx">LowPro</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">LowPro</span><span class="p">.</span><span class="nx">Version</span> <span class="o">=</span> <span class="s1">&#39;0.5&#39;</span><span class="p">;</span>
<span class="nx">LowPro</span><span class="p">.</span><span class="nx">CompatibleWithPrototype</span> <span class="o">=</span> <span class="s1">&#39;1.6&#39;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">Prototype</span><span class="p">.</span><span class="nx">Version</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">LowPro</span><span class="p">.</span><span class="nx">CompatibleWithPrototype</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">console</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s2">&quot;This version of Low Pro is tested with Prototype &quot;</span> <span class="o">+</span> <span class="nx">LowPro</span><span class="p">.</span><span class="nx">CompatibleWithPrototype</span> <span class="o">+</span> 
                  <span class="s2">&quot; it may not work as expected with this version (&quot;</span> <span class="o">+</span> <span class="nx">Prototype</span><span class="p">.</span><span class="nx">Version</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Element</span><span class="p">.</span><span class="nx">addMethods</span><span class="p">)</span> 
  <span class="nx">Element</span><span class="p">.</span><span class="nx">addMethods</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Element</span><span class="p">.</span><span class="nx">Methods</span><span class="p">,</span> <span class="nx">o</span><span class="p">)</span> <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Simple utility methods for working with the DOM</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">DOM</span> <span class="o">=</span> <span class="p">{};</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>DOMBuilder for prototype</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">DOM</span><span class="p">.</span><span class="nx">Builder</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">tagFunc</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
     <span class="kd">var</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">children</span><span class="p">;</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
       <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">constructor</span> <span class="o">==</span> <span class="nb">Object</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">attrs</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
         <span class="nx">children</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
       <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="nx">children</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span>
       <span class="p">};</span>
       <span class="nx">children</span> <span class="o">=</span> <span class="nx">$A</span><span class="p">(</span><span class="nx">children</span><span class="p">).</span><span class="nx">flatten</span><span class="p">()</span>
     <span class="p">}</span>
     <span class="k">return</span> <span class="nx">DOM</span><span class="p">.</span><span class="nx">Builder</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">tag</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">children</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">},</span>
	<span class="nx">create</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tag</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">attrs</span> <span class="o">=</span> <span class="nx">attrs</span> <span class="o">||</span> <span class="p">{};</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">children</span> <span class="o">||</span> <span class="p">[];</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nx">tag</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
		<span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="nx">tag</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">);</span>
	  
		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> 
			  <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
			<span class="nx">el</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Automatically create node builders as $tagName.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
	<span class="kd">var</span> <span class="nx">els</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;p|div|span|strong|em|img|table|tr|td|th|thead|tbody|tfoot|pre|code|&quot;</span> <span class="o">+</span> 
				     <span class="s2">&quot;h1|h2|h3|h4|h5|h6|ul|ol|li|form|input|textarea|legend|fieldset|&quot;</span> <span class="o">+</span> 
				     <span class="s2">&quot;select|option|blockquote|cite|br|hr|dd|dl|dt|address|a|button|abbr|acronym|&quot;</span> <span class="o">+</span>
				     <span class="s2">&quot;script|link|style|bdo|ins|del|object|param|col|colgroup|optgroup|caption|&quot;</span> <span class="o">+</span> 
				     <span class="s2">&quot;label|dfn|kbd|samp|var&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">el</span><span class="p">,</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="nx">el</span> <span class="o">=</span> <span class="nx">els</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">])</span> 
	  <span class="nb">window</span><span class="p">[</span><span class="s1">&#39;$&#39;</span> <span class="o">+</span> <span class="nx">el</span><span class="p">]</span> <span class="o">=</span> <span class="nx">DOM</span><span class="p">.</span><span class="nx">Builder</span><span class="p">.</span><span class="nx">tagFunc</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
<span class="p">})();</span>

<span class="nx">DOM</span><span class="p">.</span><span class="nx">Builder</span><span class="p">.</span><span class="nx">fromHTML</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">root</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">root</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">_root</span><span class="p">))</span>
    <span class="nx">root</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">_root</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
  <span class="nx">root</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">html</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">root</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Wraps the 1.6 contentloaded event for backwards compatibility</p>

<p>Usage:</p>

<p>Event.onReady(callbackFunction);</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Event</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">onReady</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span> <span class="nx">f</span><span class="p">();</span>
    <span class="k">else</span> <span class="nb">document</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="s1">&#39;dom:loaded&#39;</span><span class="p">,</span> <span class="nx">f</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Based on event:Selectors by Justin Palmer
http://encytemedia.com/event-selectors/</p>

<p>Usage:</p>

<p>Event.addBehavior({
     "selector:event" : function(event) { /* event handler.  this refers to the element. <em>/ },
     "selector" : function() { /</em> runs function on dom ready.  this refers to the element. */ }
     ...
});</p>

<p>Multiple calls will add to exisiting rules.  Event.addBehavior.reassignAfterAjax and
Event.addBehavior.autoTrigger can be adjusted to needs.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Event</span><span class="p">.</span><span class="nx">addBehavior</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rules</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ab</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">addBehavior</span><span class="p">;</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">ab</span><span class="p">.</span><span class="nx">rules</span><span class="p">,</span> <span class="nx">rules</span><span class="p">);</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ab</span><span class="p">.</span><span class="nx">responderApplied</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">Ajax</span><span class="p">.</span><span class="nx">Responders</span><span class="p">.</span><span class="nx">register</span><span class="p">({</span>
      <span class="nx">onComplete</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
        <span class="k">if</span> <span class="p">(</span><span class="nx">Event</span><span class="p">.</span><span class="nx">addBehavior</span><span class="p">.</span><span class="nx">reassignAfterAjax</span><span class="p">)</span> 
          <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">ab</span><span class="p">.</span><span class="nx">reload</span><span class="p">()</span> <span class="p">},</span> <span class="mi">10</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">ab</span><span class="p">.</span><span class="nx">responderApplied</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nx">ab</span><span class="p">.</span><span class="nx">autoTrigger</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">onReady</span><span class="p">(</span><span class="nx">ab</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">ab</span><span class="p">,</span> <span class="nx">rules</span><span class="p">));</span>
  <span class="p">}</span>
  
<span class="p">};</span>

<span class="nx">Event</span><span class="p">.</span><span class="nx">delegate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rules</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">selector</span> <span class="k">in</span> <span class="nx">rules</span> <span class="p">){</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">findElement</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">rules</span><span class="p">[</span><span class="nx">selector</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">$A</span><span class="p">(</span><span class="nx">arguments</span><span class="p">));</span>
			<span class="p">}</span>
		<span class="p">}</span>        
	<span class="p">}</span>
<span class="p">}</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Event</span><span class="p">.</span><span class="nx">addBehavior</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">rules</span> <span class="o">:</span> <span class="p">{},</span> <span class="nx">cache</span> <span class="o">:</span> <span class="p">[],</span>
  <span class="nx">reassignAfterAjax</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">autoTrigger</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  
  <span class="nx">load</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rules</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">selector</span> <span class="k">in</span> <span class="nx">rules</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">observer</span> <span class="o">=</span> <span class="nx">rules</span><span class="p">[</span><span class="nx">selector</span><span class="p">];</span>
      <span class="kd">var</span> <span class="nx">sels</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">);</span>
      <span class="nx">sels</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">sel</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">sel</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/:(?=[a-z]+$)/</span><span class="p">),</span> <span class="nx">css</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">event</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">$$</span><span class="p">(</span><span class="nx">css</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">wrappedObserver</span> <span class="o">=</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">addBehavior</span><span class="p">.</span><span class="nx">_wrapObserver</span><span class="p">(</span><span class="nx">observer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">).</span><span class="nx">observe</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">wrappedObserver</span><span class="p">);</span>
            <span class="nx">Event</span><span class="p">.</span><span class="nx">addBehavior</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">element</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">wrappedObserver</span><span class="p">]);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">element</span><span class="p">.</span><span class="nx">$$assigned</span> <span class="o">||</span> <span class="o">!</span><span class="nx">element</span><span class="p">.</span><span class="nx">$$assigned</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="nx">observer</span><span class="p">))</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">observer</span><span class="p">.</span><span class="nx">attach</span><span class="p">)</span> <span class="nx">observer</span><span class="p">.</span><span class="nx">attach</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
              
              <span class="k">else</span> <span class="nx">observer</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">));</span>
              <span class="nx">element</span><span class="p">.</span><span class="nx">$$assigned</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">$$assigned</span> <span class="o">||</span> <span class="p">[];</span>
              <span class="nx">element</span><span class="p">.</span><span class="nx">$$assigned</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">observer</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">},</span>
  
  <span class="nx">unload</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Event</span><span class="p">.</span><span class="nx">stopObserving</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">Event</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="p">},</span>
  
  <span class="nx">reload</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ab</span> <span class="o">=</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">addBehavior</span><span class="p">;</span>
    <span class="nx">ab</span><span class="p">.</span><span class="nx">unload</span><span class="p">();</span> 
    <span class="nx">ab</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="nx">ab</span><span class="p">.</span><span class="nx">rules</span><span class="p">);</span>
  <span class="p">},</span>
  
  <span class="nx">_wrapObserver</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">observer</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">observer</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="nx">event</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span> 
    <span class="p">}</span>
  <span class="p">}</span>
  
<span class="p">});</span>

<span class="nx">Event</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s1">&#39;unload&#39;</span><span class="p">,</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">addBehavior</span><span class="p">.</span><span class="nx">unload</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Event</span><span class="p">.</span><span class="nx">addBehavior</span><span class="p">));</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>A silly Prototype style shortcut for the reckless</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">$$$</span> <span class="o">=</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">addBehavior</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">Event</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Behaviors can be bound to elements to provide an object orientated way of controlling elements
and their behavior.  Use Behavior.create() to make a new behavior class then use attach() to
glue it to an element.  Each element then gets it's own instance of the behavior and any
methods called onxxx are bound to the relevent event.</p>

<p>Usage:</p>

<p>var MyBehavior = Behavior.create({
  onmouseover : function() { this.element.addClassName('bong') } 
});</p>

<p>Event.addBehavior({ 'a.rollover' : MyBehavior });</p>

<p>If you need to pass additional values to initialize use:</p>

<p>Event.addBehavior({ 'a.rollover' : MyBehavior(10, { thing : 15 }) })</p>

<p>You can also use the attach() method.  If you specify extra arguments to attach they get passed to initialize.</p>

<p>MyBehavior.attach(el, values, to, init);</p>

<p>Finally, the rawest method is using the new constructor normally:
var draggable = new Draggable(element, init, vals);</p>

<p>Each behaviour has a collection of all its instances in Behavior.instances</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">Behavior</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">properties</span> <span class="o">=</span> <span class="nx">$A</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">properties</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
      <span class="nx">parent</span> <span class="o">=</span> <span class="nx">properties</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>

      <span class="kd">var</span> <span class="nx">behavior</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">$A</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>

          <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">initArgs</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span>
            <span class="nx">behavior</span><span class="p">.</span><span class="nx">attach</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">behavior</span><span class="p">,</span> <span class="nx">initArgs</span><span class="p">);</span>
          <span class="p">};</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="o">?</span> 
                      <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

          <span class="k">this</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
          <span class="nx">behavior</span><span class="p">.</span><span class="nx">_bindEvents</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
          <span class="nx">behavior</span><span class="p">.</span><span class="nx">instances</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">};</span>

    <span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">behavior</span><span class="p">,</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">Methods</span><span class="p">);</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">behavior</span><span class="p">,</span> <span class="nx">Behavior</span><span class="p">.</span><span class="nx">Methods</span><span class="p">);</span>
    <span class="nx">behavior</span><span class="p">.</span><span class="nx">superclass</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
    <span class="nx">behavior</span><span class="p">.</span><span class="nx">subclasses</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">behavior</span><span class="p">.</span><span class="nx">instances</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">subclass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="p">};</span>
      <span class="nx">subclass</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>
      <span class="nx">behavior</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">subclass</span><span class="p">;</span>
      <span class="nx">parent</span><span class="p">.</span><span class="nx">subclasses</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">behavior</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">properties</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
      <span class="nx">behavior</span><span class="p">.</span><span class="nx">addMethods</span><span class="p">(</span><span class="nx">properties</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">behavior</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initialize</span><span class="p">)</span>
      <span class="nx">behavior</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initialize</span> <span class="o">=</span> <span class="nx">Prototype</span><span class="p">.</span><span class="nx">emptyFunction</span><span class="p">;</span>

    <span class="nx">behavior</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">behavior</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">behavior</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">Methods</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">attach</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="k">this</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
    <span class="p">},</span>
    <span class="nx">_bindEvents</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">bound</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">member</span> <span class="k">in</span> <span class="nx">bound</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="nx">member</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^on(.+)/</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">matches</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">bound</span><span class="p">[</span><span class="nx">member</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span>
          <span class="nx">bound</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">addBehavior</span><span class="p">.</span><span class="nx">_wrapObserver</span><span class="p">(</span><span class="nx">bound</span><span class="p">[</span><span class="nx">member</span><span class="p">].</span><span class="nx">bindAsEventListener</span><span class="p">(</span><span class="nx">bound</span><span class="p">)));</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>



<span class="nx">Remote</span> <span class="o">=</span> <span class="nx">Behavior</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">==</span> <span class="s1">&#39;FORM&#39;</span><span class="p">)</span> <span class="k">new</span> <span class="nx">Remote</span><span class="p">.</span><span class="nx">Form</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="k">else</span> <span class="k">new</span> <span class="nx">Remote</span><span class="p">.</span><span class="nx">Link</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">Remote</span><span class="p">.</span><span class="nx">Base</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">initialize</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
      <span class="nx">evaluateScripts</span> <span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{});</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">_bindCallbacks</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">_makeRequest</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">update</span><span class="p">)</span> <span class="k">new</span> <span class="nx">Ajax</span><span class="p">.</span><span class="nx">Updater</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">update</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="k">else</span> <span class="k">new</span> <span class="nx">Ajax</span><span class="p">.</span><span class="nx">Request</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">_bindCallbacks</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$w</span><span class="p">(</span><span class="s1">&#39;onCreate onComplete onException onFailure onInteractive onLoading onLoaded onSuccess&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">cb</span><span class="p">]))</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">cb</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">cb</span><span class="p">].</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Remote</span><span class="p">.</span><span class="nx">Link</span> <span class="o">=</span> <span class="nx">Behavior</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Remote</span><span class="p">.</span><span class="nx">Base</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">onclick</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span> <span class="nx">url</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span> <span class="nx">method</span> <span class="o">:</span> <span class="s1">&#39;get&#39;</span> <span class="p">},</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_makeRequest</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>


<span class="nx">Remote</span><span class="p">.</span><span class="nx">Form</span> <span class="o">=</span> <span class="nx">Behavior</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">Remote</span><span class="p">.</span><span class="nx">Base</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">onclick</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sourceElement</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">element</span><span class="p">();</span>
    
    <span class="k">if</span> <span class="p">([</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="s1">&#39;button&#39;</span><span class="p">].</span><span class="nx">include</span><span class="p">(</span><span class="nx">sourceElement</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">())</span> <span class="o">&amp;&amp;</span> 
        <span class="p">[</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="s1">&#39;image&#39;</span><span class="p">].</span><span class="nx">include</span><span class="p">(</span><span class="nx">sourceElement</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_submitButton</span> <span class="o">=</span> <span class="nx">sourceElement</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">onsubmit</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
      <span class="nx">url</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">action</span><span class="p">,</span>
      <span class="nx">method</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">method</span> <span class="o">||</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
      <span class="nx">parameters</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">serialize</span><span class="p">({</span> <span class="nx">submit</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_submitButton</span><span class="p">.</span><span class="nx">name</span> <span class="p">})</span>
    <span class="p">},</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_submitButton</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_makeRequest</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">Observed</span> <span class="o">=</span> <span class="nx">Behavior</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="nx">initialize</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">callback</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">==</span> <span class="s1">&#39;FORM&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_observeForm</span><span class="p">()</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_observeField</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">stop</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">_observeForm</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">frequency</span><span class="p">)</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">Form</span><span class="p">.</span><span class="nx">Observer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">frequency</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">callback</span><span class="p">)</span> <span class="o">:</span>
                                      <span class="k">new</span> <span class="nx">Form</span><span class="p">.</span><span class="nx">EventObserver</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">callback</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">_observeField</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">frequency</span><span class="p">)</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">Form</span><span class="p">.</span><span class="nx">Element</span><span class="p">.</span><span class="nx">Observer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">frequency</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">callback</span><span class="p">)</span> <span class="o">:</span>
                                      <span class="k">new</span> <span class="nx">Form</span><span class="p">.</span><span class="nx">Element</span><span class="p">.</span><span class="nx">EventObserver</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">callback</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 